# cbor-fuzz

cbor-fuzz performs coverage-guided fuzzing for a [CBOR library](https://github.com/fxamacker/cbor) (fxamacker/cbor).

Input data for fuzzing is inside the corpus folder.

The corpus folder initially contains:
* 80 files with [RFC 7049 test data](https://tools.ietf.org/html/rfc7049#appendix-A) as seed (except value -18446744073709551616, which cannot fit into Go's int64.)
* 337 files generated by fuzzing for 38 hours with 2 workers on AMD EPYC 7601 virtual machine

The initial corpus makes the cover counter start at 1481.

During fuzzing, new files are created in these folders:
* corpus -- when useful input data is found
* crashers -- when problems are found

## Installation 

```
go get -u github.com/dvyukov/go-fuzz/go-fuzz github.com/dvyukov/go-fuzz/go-fuzz-build
go get -u github.com/fxamacker/cbor github.com/fxamacker/cbor-fuzz
``` 

## Usage
Reusing the same corpus folder is recommended, to benefit from corpus generated during prior fuzzing.

```
cd cbor-fuzz
go-fuzz-build .
go-fuzz
```

## Example output 
Output from cbor-fuzz fuzzing fxamacker/cbor.

```
2019/11/03 09:05:24 workers: 2, corpus: 409 (1h55m ago), crashers: 0, restarts: 1/10000, execs: 976487338 (7135/sec), cover: 1464, uptime: 38h1m
2019/11/03 09:05:27 workers: 2, corpus: 410 (2s ago), crashers: 0, restarts: 1/10000, execs: 976498523 (7135/sec), cover: 1464, uptime: 38h1m
2019/11/03 09:05:30 workers: 2, corpus: 410 (5s ago), crashers: 0, restarts: 1/10000, execs: 976507522 (7135/sec), cover: 1481, uptime: 38h1m
```

## System requirements
* Go 1.12 (or newer) is required for cbor v1 and cbor-fuzz.

## License 

Copyright (c) 2019 [Faye Amacker](https://github.com/fxamacker)

Licensed under [MIT License](LICENSE)
